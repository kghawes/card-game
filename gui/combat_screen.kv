#:kivy 2.3.1

<DevConsole>:
    text_input: text_input
    text_output: text_output
    DevConsoleInput:
        id: text_input
        multiline: False
        hint_text: '/help for commands, ` to close'
        pos: 0, 0
        size: 1500, 40
        color: (1, 1, 1, 1)
    Label:
        id: text_output
        pos: 0, 39
        size: 1500, 400
        color: (1, 1, 1, 1)
        text: ''
        text_size: self.size
        padding: 4
        canvas.before:
            Color:
                rgba: (0, 0, 0, 1)
            Rectangle:
                size: self.size
                pos: self.pos

<Button>:
    size_hint: None, None
    height: 35
    width: 148
    background_normal: 'gui/assets/btn_up.9.png'
    background_color: (1, 1, 1, 1)
    color: (0.715, 0.676, 0.535, 1.0)
    font_size: 21
    font_name: 'gui/assets/fonts/romanantique.ttf'
    bold: False
    background_down: 'gui/assets/btn_down.9.png'
    disabled_color: (0.715, 0.676, 0.535, 0.75)
    background_disabled_normal: 'gui/assets/btn_down.9.png'
    border: (27, 50, 4, 4)

<ScreenDarken>:
    pos: 0, 0
    size: 1500, 900
    canvas:
        Color:
            rgba: (0, 0, 0, 0.33)
        Rectangle:
            pos: 0, 0
            size: 1500, 900

<CombatResults>:
    id: combat_results
    combat_results_label: combat_results_label
    continue_button: continue_button

    FloatLayout:
        size: 300, 200
        pos: 600, 450
        canvas:
            Color:
                rgba: (0, 0, 0, 1)
            Rectangle:
                pos: self.center_x - self.width / 2, self.center_y - self.height / 2
                size: self.size

        Label:
            id: combat_results_label
            text: 'Combat Results'
            font_size: 32
            color: (1, 1, 1, 1)
            pos: 650, 580
            size: 200, 40
            size_hint: None, None

        Button:
            id: continue_button
            text: 'Back to Map'
            pos: 676, 490
            on_release: root.back_to_quest()

<StatusIcon>:
    canvas:
        Color:
            rgba: (1, 1, 1, 1)
        Rectangle:
            texture: self.status_texture
            size: 32, 32
            pos: self.pos

    Label:
        size: self.texture_size
        size_hint: None, None
        pos: self.parent.pos[0] + 33, self.parent.pos[1]
        color: (1, 1, 1, 1)
        text: self.parent.level
        font_size: 10
        font_name: 'gui/assets/fonts/minecraftstandard.otf'
    

<CombatScreen>:
    id: combat_screen
    hand: hand
    play_area: play_area
    title: title
    player_info: player_info
    enemy_info: enemy_info
    discard_pile: discard_pile
    deck: deck
    combat_log: combat_log
    animation_layer: animation_layer
    end_turn_button: end_turn_button

    FloatLayout:
        size: self.parent.size
        pos: self.parent.pos

        Widget:
            id: play_area
            pos: 316, 324
            size: 868, 528
            size_hint: None, None
            canvas:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                Rectangle:
                    pos: self.center_x - self.width / 2, self.center_y - self.height / 2
                    size: self.size

        Label:
            id: title
            text: 'Journeys in the Land of Ash'
            font_size: 32
            color: (1, 1, 1, 1)
            pos: 0, 860
            size: 1500, 40
            size_hint: None, None
            canvas.before:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

        FloatLayout:
            id: player_info
            player_name_label: player_name_label
            player_health_label: player_health_label
            player_stamina_label: player_stamina_label
            player_magicka_label: player_magicka_label
            player_strength_label: player_strength_label
            player_endurance_label: player_endurance_label
            player_agility_label: player_agility_label
            player_speed_label: player_speed_label
            player_intelligence_label: player_intelligence_label
            player_willpower_label: player_willpower_label
            player_personality_label: player_personality_label
            player_luck_label: player_luck_label
            player_statuses: player_statuses
            pos: 8, 324
            size: 300, 528
            size_hint: None, None
            orientation: 'vertical'
            canvas:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Label:
                id: player_name_label
                text: ''
                pos: 8, 812
                size: 300, 40
                size_hint: None, None
            
            Label:
                text: 'Health'
                pos: 8, 782
                size: 90, 30
                size_hint: None, None

            Label:
                id: player_health_label
                text: ''
                pos: 108, 782
                size: 200, 30
                size_hint: None, None
            
            Label:
                text: 'Stamina'
                pos: 8, 752
                size: 90, 30
                size_hint: None, None

            Label:
                id: player_stamina_label
                text: ''
                pos: 108, 752
                size: 200, 30
                size_hint: None, None
            
            Label:
                text: 'Magicka'
                pos: 8, 722
                size: 90, 30
                size_hint: None, None

            Label:
                id: player_magicka_label
                text: ''
                pos: 108, 722
                size: 200, 30
                size_hint: None, None

            Label:
                text: 'Strength'
                pos: 8, 690
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_strength_label
                text: ''
                pos: 108, 690
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Endurance'
                pos: 158, 690
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_endurance_label
                text: ''
                pos: 258, 690
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Agility'
                pos: 8, 666
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_agility_label
                text: ''
                pos: 108, 666
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Speed'
                pos: 158, 666
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_speed_label
                text: ''
                pos: 258, 666
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Intelligence'
                pos: 8, 642
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_intelligence_label
                text: ''
                pos: 108, 642
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Willpower'
                pos: 158, 642
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_willpower_label
                text: ''
                pos: 258, 642
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Personality'
                pos: 8, 618
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_personality_label
                text: ''
                pos: 108, 618
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Luck'
                pos: 158, 618
                size: 100, 24
                size_hint: None, None

            Label:
                id: player_luck_label
                text: ''
                pos: 258, 618
                size: 40, 24
                size_hint: None, None
            
            FloatLayout:
                id: player_statuses
                pos: 8, 324
            
        FloatLayout:
            id: enemy_info
            enemy_name_label: enemy_name_label
            enemy_health_label: enemy_health_label
            enemy_stamina_label: enemy_stamina_label
            enemy_magicka_label: enemy_magicka_label
            enemy_strength_label: enemy_strength_label
            enemy_endurance_label: enemy_endurance_label
            enemy_agility_label: enemy_agility_label
            enemy_speed_label: enemy_speed_label
            enemy_intelligence_label: enemy_intelligence_label
            enemy_willpower_label: enemy_willpower_label
            enemy_personality_label: enemy_personality_label
            enemy_luck_label: enemy_luck_label
            enemy_statuses: enemy_statuses
            pos: 1192, 372
            size: 300, 480
            size_hint: None, None
            canvas:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                id: enemy_name_label
                text: ''
                pos: 1192, 812
                size: 300, 40
                size_hint: None, None
            
            Label:
                text: 'Health'
                pos: 1192, 782
                size: 90, 30
                size_hint: None, None

            Label:
                id: enemy_health_label
                text: ''
                pos: 1292, 782
                size: 200, 30
                size_hint: None, None
            
            Label:
                text: 'Stamina'
                pos: 1192, 752
                size: 90, 30
                size_hint: None, None

            Label:
                id: enemy_stamina_label
                text: ''
                pos: 1292, 752
                size: 200, 30
                size_hint: None, None
            
            Label:
                text: 'Magicka'
                pos: 1192, 722
                size: 90, 30
                size_hint: None, None

            Label:
                id: enemy_magicka_label
                text: ''
                pos: 1292, 722
                size: 200, 30
                size_hint: None, None

            Label:
                text: 'Strength'
                pos: 1192, 690
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_strength_label
                text: ''
                pos: 1292, 690
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Endurance'
                pos: 1342, 690
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_endurance_label
                text: ''
                pos: 1442, 690
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Agility'
                pos: 1192, 666
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_agility_label
                text: ''
                pos: 1292, 666
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Speed'
                pos: 1342, 666
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_speed_label
                text: ''
                pos: 1442, 666
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Intelligence'
                pos: 1192, 642
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_intelligence_label
                text: ''
                pos: 1292, 642
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Willpower'
                pos: 1342, 642
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_willpower_label
                text: ''
                pos: 1442, 642
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Personality'
                pos: 1192, 618
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_personality_label
                text: ''
                pos: 1292, 618
                size: 40, 24
                size_hint: None, None

            Label:
                text: 'Luck'
                pos: 1342, 618
                size: 100, 24
                size_hint: None, None

            Label:
                id: enemy_luck_label
                text: ''
                pos: 1442, 618
                size: 40, 24
                size_hint: None, None
            
            FloatLayout:
                id: enemy_statuses
                pos: 1192, 372
                size: 300, 350

        Widget:
            id: discard_pile
            pos: 1292, 8
            size: 200, 300
            size_hint: None, None
            canvas.before:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                RoundedRectangle:
                    pos: self.center_x - self.width / 2, self.center_y - self.height / 2
                    size: self.size
                    radius: [20, 20, 20, 20]

        Widget:
            id: deck
            pos: 8, 8
            size: 200, 300
            size_hint: None, None
            canvas.before:
                Color:
                    rgba: (0.1, 0.1, 0.1, 1)
                RoundedRectangle:
                    pos: self.center_x - self.width / 2, self.center_y - self.height / 2
                    size: self.size
                    radius: [20, 20, 20, 20]
            canvas:
                Color:
                    rgba: (0.62, 0.569, 0.443, 1.0) if self.parent.parent.show_deck else (0, 0, 0, 0)
                RoundedRectangle:
                    pos: self.center_x - self.width / 2, self.center_y - self.height / 2
                    size: self.size
                    radius: [15, 15, 15, 15]
                Color:
                    rgba: (1, 1, 1, 1) if self.parent.parent.show_deck else (0, 0, 0, 0)
                RoundedRectangle:
                    source: 'gui/assets/cardbg.png'
                    pos: self.center_x - self.width / 2 + 4, self.center_y - self.height / 2 + 4
                    size: self.width - 8, self.height - 8
                    radius: [13, 13, 13, 13]
                Rectangle:
                    source: 'gui/assets/cardback1.png'
                    pos: self.pos
                    size: self.size

        Button:
            id: end_turn_button
            text: 'End Turn'
            pos: 1344, 324
            on_release: root.end_turn()
            canvas.after:
                Color:
                    rgba: (0.715, 0.676, 0.535, 1.0)
                Rectangle:
                    texture: root.wait_texture
                    pos: self.x + 6, self.y + 6
                    size: 23, 23
        
        Button:
            text: 'View Log'
            pos: 1192, 324
            on_release: root.toggle_log()
            canvas.after:
                Color:
                    rgba: (0.715, 0.676, 0.535, 1.0)
                Rectangle:
                    texture: root.log_texture
                    pos: self.x + 6, self.y + 6
                    size: 23, 23

        CombatLog:
            id: combat_log
            combat_log_label: combat_log_label
            pos: 316, 324
            size: 868, combat_log_label.texture_size[1] + 4
            size_hint: None, None
            canvas.before:
                Color:
                    rgba: (0, 0, 0, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                id: combat_log_label
                text: ''
                font_size: 16
                color: (1, 1, 1, 1)
                size: self.parent.width, self.texture_size[1]
                size_hint: None, None
                pos: self.parent.pos

        Hand:
            id: hand
            pos: 234, 8
            size: 1032, 300
            size_hint: None, None
        
        FloatLayout:
            id: animation_layer
            size: self.parent.size
            size_hint: None, None
